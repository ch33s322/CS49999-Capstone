<Window x:Class="MyWpfApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:Printer.ViewModel"  
        xmlns:printerModel="clr-namespace:Printer.Model" 
        
        xmlns:jobModel="clr-namespace:MyWpfApp.Model"
        xmlns:fsvm="clr-namespace:FileSystem.ViewModel"    
        xmlns:fsm="clr-namespace:FileSystemItemModel.Model" 
        xmlns:local="clr-namespace:MyWpfApp"
        mc:Ignorable="d"
        Title="MainWindow" Height="720" Width="1280">


    <Grid>
        <TabControl Width="1260" Height="684" VerticalAlignment="Center" HorizontalAlignment="Center" >
            <!-- Tab 1 -->
            <TabItem Header="Print Job Manager">
                <Grid Margin="0,0,10,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="106*"/>
                        <ColumnDefinition Width="53*"/>
                        <ColumnDefinition Width="463*"/>
                    </Grid.ColumnDefinitions>

                    <ComboBox Name="PrinterSelect" ItemsSource="{Binding AvailablePrinters}"  DisplayMemberPath="Name" Height="39" Width="154" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,10,0,0" Text="Select Printer" FontSize="20" IsEditable="True" IsReadOnly="True" SelectionChanged="PrinterSelectSelectionChanged">
                        <ComboBox.DataContext>
                            <vm:PrinterViewModel/>
                        </ComboBox.DataContext>
                    </ComboBox>

                    <CheckBox Name="SimplexDuplexCheckBox" Checked="SimplexDuplexCheckBoxChecked" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="9,26,0,0" Height="14" Width="15" RenderTransformOrigin="0.733,-2.067" Grid.Column="1"/>

                    <Button Name="SendJob" Width="100" Height="39"
                    VerticalAlignment="Top" HorizontalAlignment="Left"
                    Content="Send Job" FontSize="20" Margin="37,10,0,0" Click="SendJobClick" RenderTransformOrigin="0.5,-0.845" Grid.Column="1" Grid.ColumnSpan="2"/>

                    <Label x:Name="checkboxLabel" Content="Duplex" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="164,16,0,0" Height="27" Width="63" FontSize="15" TextBlock.TextAlignment="Center" Grid.ColumnSpan="2"/>

                    <TreeView Name="fileTreeView" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,54,0,0" Width="339" Height="602" ItemsSource="{Binding RootItems}" Grid.ColumnSpan="3">
                        <TreeView.DataContext>
                            <fsvm:FileSyetemViewModel/>
                        </TreeView.DataContext>
                        <TreeView.Resources>
                            <HierarchicalDataTemplate DataType="{x:Type fsm:FileSystemItem}" ItemsSource="{Binding Children}">
                                <TextBlock Text="{Binding Name}" />
                            </HierarchicalDataTemplate>
                        </TreeView.Resources>
                        <TreeView.ItemContainerStyle>
                            <Style TargetType="TreeViewItem">
                                <EventSetter Event="Expanded" Handler="TreeViewItem_Expanded"/>
                                <Setter Property="IsExpanded" Value="true" />
                            </Style>
                        </TreeView.ItemContainerStyle>
                    </TreeView>

                    <!--<DataGrid Name="DirectoryViewer"  VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,106,0,0" Width="339" Height="588">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Icon" Binding="{Binding Icon}" Width="50"/>
                <DataGridTextColumn Header="File Name" Binding="{Binding FileName}" Width="*"/>
                <DataGridTextColumn Header="File Type" Binding="{Binding FileType}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>-->
                    <!-- Print Manager GroupBox-->
                    <GroupBox Height="684" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="36,0,0,0" Header="Job Queue Manager" BorderThickness="1" Width="900" Grid.Column="2">
                        <DataGrid Name="PrintJobManager" 
                                  ItemsSource="{Binding AvailablePrinters}" 
                                  Height="638" Width="896" 
                                  VerticalAlignment="Top" 
                                  HorizontalAlignment="Left" 
                                  SelectionChanged="PrintJobManager_SelectionChanged"
                                  AutoGenerateColumns="False"
                                  RowDetailsVisibilityMode="Visible"
                                  CanUserAddRows="False"
                                  IsReadOnly="True">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Printer Name" Binding="{Binding Name}" Width="Auto"/>
                                <DataGridTemplateColumn Header="Job Details" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TreeView Name="JobDetailsTreeView"
                                              ItemsSource="{Binding Jobs}">
                                                <TreeView.Resources>
                                                    <HierarchicalDataTemplate DataType="{x:Type printerModel:Printer}" 
                                                      ItemsSource="{Binding Jobs}">
                                                        <TextBlock Text="{Binding Name}" FontWeight="Bold" Foreground="DarkGreen"/>
                                                    </HierarchicalDataTemplate>

                                                    <DataTemplate DataType="{x:Type jobModel:Job}">
                                                        <StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="Job: "/>
                                                                <TextBlock Text="{Binding orgPdfName}" 
                                                                           Foreground="Black"/>
                                                            </StackPanel>

                                                            <ItemsControl ItemsSource="{Binding fileNames}" Margin="15,0,0,0">
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Button Content="{Binding .}" 
                                                                                Padding="0"
                                                                                HorizontalAlignment="Left"
                                                                                Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
                                                                            <Button.Command>
                                                                                <Binding Path="DataContext.OpenFileCommand" 
                                                                                         RelativeSource="{RelativeSource FindAncestor, 
                                                                                         AncestorType={x:Type TreeView}}"/>
                                                                            </Button.Command>

                                                                            <Button.CommandParameter>
                                                                                <Binding Path="."/>
                                                                            </Button.CommandParameter>
                                                                        </Button>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                        </StackPanel>
                                                    </DataTemplate>


                                                </TreeView.Resources>
                                            </TreeView>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                            </DataGrid.Columns>



                            <DataGrid.RowStyle>
                                <Style TargetType="DataGridRow">
                                    <Setter Property="ContextMenu">
                                        <Setter.Value>
                                            <ContextMenu>
                                                <ContextMenu.Resources>
                                                    <Style TargetType="MenuItem">
                                                        <Setter Property="DataContext" Value="{x:Null}" />
                                                    </Style>
                                                </ContextMenu.Resources>
                                                <MenuItem Header="Print Job"  />
                                                <MenuItem Header="Remove Job" />
                                                <MenuItem Header="View Job"    />
                                                <MenuItem Header="Move Job"    />
                                            </ContextMenu>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </DataGrid.RowStyle>

                            <DataGrid.DataContext>
                                <vm:PrinterViewModel/>
                            </DataGrid.DataContext>

                        </DataGrid>

                    </GroupBox>
                </Grid>
            </TabItem>
            <!-- Tab 2  -->
            <TabItem Header="Settings">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="8*"/>
                        <ColumnDefinition Width="201*"/>
                    </Grid.ColumnDefinitions>
                    <Label Content="Input Directory" Margin="0,0,0,0"  VerticalAlignment="Top" HorizontalAlignment="Left" Grid.ColumnSpan="2"/>
                    <TextBox Name="InputDir" Width="234" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" BorderThickness="2" Margin="52,5,0,0" FontSize="12" TextChanged="DirectorySelectTextChanged" Grid.Column="1"/>
                    <Button Name="SetInputDirButton" Content="Browse" Width="60" Height="22" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="289,4,0,0" Click="AddPrinterButton_Click" Grid.Column="1"/>
                    <Label Content="Archive Directory" Margin="0,27,0,0"  VerticalAlignment="Top" HorizontalAlignment="Left" Grid.ColumnSpan="2"/>

                    <TextBox Name="archiveDirTextBox" Width="234" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" BorderThickness="2" Margin="52,32,0,0" FontSize="12" Grid.Column="1" />
                    <Button Name="SetArchiveDirButton" Content="Browse" Width="60" Height="22" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="289,30,0,0" Click="AddPrinterButton_Click" Grid.Column="1"/>

                    <Label Content="Job Directory" Margin="0,53,0,0"  VerticalAlignment="Top" HorizontalAlignment="Left" Grid.ColumnSpan="2"/>
                    <TextBox Name="jobDirTextBox" Width="234" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" BorderThickness="2" Margin="52,58,0,0" FontSize="12" Grid.Column="1" />
                    <Button Name="SetJoBDirButton" Content="Browse" Width="60" Height="22" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="289,56,0,0" Click="AddPrinterButton_Click" Grid.Column="1"/>

                    <Label Content="Add Printer" Margin="0,79,0,0"  VerticalAlignment="Top" HorizontalAlignment="Left" Grid.ColumnSpan="2"/>
                    <ComboBox Name="printerPickComboBox" Width="200" Height="22" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="52,83,0,0" FontSize="12" Grid.Column="1"/>
                    <Button Name="AddPrinterButton" Content="Add" Width="60" Height="22" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="262,83,0,0" Click="AddPrinterButton_Click" Grid.Column="1"/>
                    <Label Content="Remove Printer" Margin="0,109,0,0"  VerticalAlignment="Top" HorizontalAlignment="Left" Grid.ColumnSpan="2"/>
                    <ComboBox Name="currentPrinterPickComboBox" ItemsSource="{Binding AvailablePrinters}"  DisplayMemberPath="Name" Width="200" Height="22" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="52,109,0,0" FontSize="12" Grid.Column="1">
                        <ComboBox.DataContext>
                            <vm:PrinterViewModel/>
                        </ComboBox.DataContext>
                    </ComboBox>
                    <Button Name="RemovePrinterButton" Content="Remove" Width="60" Height="22" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="262,109,0,0" Click="RemovePrinterButton_Click" Grid.Column="1"/>
                </Grid>
            </TabItem>
        </TabControl>


    </Grid>
</Window>
